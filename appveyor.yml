image: Visual Studio 2022

platform: x64
notifications:
  - provider: Gmail
    to:
      - sinha.soham1231@gmail.com
      - akshit.singla.dps@gmail.com
      - mellurblur@gmail.com
    on_build_success: false
    on_build_failure: true
    on_build_status_changed: true

install:
  # None of the packaged channels are new enough for the current state
  # of FDE, so for now clone master instead.
  #- ps: build\ci\install_flutter.ps1 $env:APPVEYOR_BUILD_FOLDER\..
  - git clone -b master https://github.com/flutter/flutter.git %APPVEYOR_BUILD_FOLDER%\..\flutter

build_script:
  - set "PATH=%APPVEYOR_BUILD_FOLDER%\..\flutter\bin;C:\Program Files (x86)\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build\;%PATH%"
  - flutter config --enable-windows-desktop
  - ps: cd "$env:APPVEYOR_BUILD_FOLDER\client"
  - flutter packages get
  - flutter test
  - flutter build -v windows --debug
  - flutter build -v windows --release
